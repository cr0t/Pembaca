<h1>Listing uploads</h1>

<table>
	<thead>
		<tr>
			<th>Filename</th>
			<th>Content Type</th>
			<th>Public?</th>
			<th>Converted?</th>
			<th>Pages</th>
			<th>Host</th>
			<th colspan="4">Actions</th>
	  </tr>
	</thead>
	
	<tbody>
		<% @uploads.each do |upload| %>
			<tr>
				<td><%= upload.file_filename[0..20] %><%= if upload.file_filename.size > 20 then "..."; end %></td>
				<td><%= upload.content_type.gsub(/application\//, "") %></td>
				<td><%= upload.public %></td>
				<td><%= converted_percent(upload) %>%</td>
				<td><%= upload.total_pages %></td>
				<td><%= upload.static_host %></td>
				<% # TODO: remove 'uploaded' part from the download URL %>
				<td><%= link_to 'Download', 'uploaded' + upload.file.url, :target => "_blank" %></td>
				<td><%= link_to 'Show', upload %></td>
				<td><%= link_to 'ReConvert', :controller => "uploads", :action => "reconvert", :id => upload.id %></td>
				<td><%= link_to 'Destroy', upload, :confirm => 'Are you sure?', :method => :delete %></td>
			</tr>
		<% end %>
	</tbody>
</table>

<br />

<%= link_to 'New Upload', new_upload_path %>
